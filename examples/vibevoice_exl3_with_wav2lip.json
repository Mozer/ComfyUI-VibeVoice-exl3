{
  "id": "00000000-0000-0000-0000-000000000000",
  "revision": 0,
  "last_node_id": 104,
  "last_link_id": 58,
  "nodes": [
    {
      "id": 76,
      "type": "ReplaceStringMultipleNode",
      "pos": [
        -185.1769174792445,
        666.5775575273005
      ],
      "size": [
        312.88090500511953,
        460.02104030565715
      ],
      "flags": {},
      "order": 0,
      "mode": 4,
      "inputs": [],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            49
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "ReplaceStringMultipleNode"
      },
      "widgets_values": [
        "Your text to clean here…",
        "{\n\"...\": \", \",\n\"…\": \", \",\n\"..\": \".\" ,\n\"(\": \"\" ,\n\")\": \".\" ,\n\"  \": \" \",\n\" ,\": \",\",\n\"*\": \"\",\n\"—\": \"\",\n\":\\\\n\": \".\\\\n\",\n\"\\\"\": \"\"\n}",
        "single_speaker",
        "Юзер",
        "Ассистент",
        "Эмма",
        "",
        "",
        ""
      ]
    },
    {
      "id": 100,
      "type": "PreviewAny",
      "pos": [
        151.4933118003928,
        672.4761842343662
      ],
      "size": [
        210,
        88
      ],
      "flags": {},
      "order": 9,
      "mode": 4,
      "inputs": [
        {
          "name": "source",
          "type": "*",
          "link": 49
        }
      ],
      "outputs": [],
      "properties": {
        "Node name for S&R": "PreviewAny"
      },
      "widgets_values": []
    },
    {
      "id": 95,
      "type": "Note",
      "pos": [
        -173.81669344324234,
        498.47389667524874
      ],
      "size": [
        307.32855972564147,
        121.68452510528158
      ],
      "flags": {},
      "order": 1,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "replace string multiple node",
      "properties": {},
      "widgets_values": [
        "use this node to remove special symbols from text. Some symbols like \"...\", \"…\" or \"*\" can cause garbage at audio, replace them with \",\" or \".\".\n\nThis node can also replace \"Charname: \" to \"[1]: \". This feature is experimental and not fully tested."
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 94,
      "type": "SaveAudioMP3",
      "pos": [
        926.9919861547428,
        547.1681036373518
      ],
      "size": [
        210,
        136
      ],
      "flags": {},
      "order": 14,
      "mode": 0,
      "inputs": [
        {
          "name": "audio",
          "type": "AUDIO",
          "link": 46
        }
      ],
      "outputs": [],
      "properties": {
        "Node name for S&R": "SaveAudioMP3"
      },
      "widgets_values": [
        "audio/ComfyUI",
        "V0"
      ]
    },
    {
      "id": 98,
      "type": "Note",
      "pos": [
        1182.3462231567198,
        911.2271204180206
      ],
      "size": [
        210,
        243.46796736692255
      ],
      "flags": {},
      "order": 2,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "original",
      "properties": {},
      "widgets_values": [
        "(4.00 t/s on 3090, 20 GB vram)\n\n7b\nbf16\nexllama: none\nsdpa\nfree_mem: false\n20 steps\ncfg: 1.30\nsampling: false\nstreaming_to_audio: false\nbuffer: 10 sec\nnegative_steps_to_skip: 0\nsemantic_steps_to_skip: 0\nincrease_cfg: false\nsolver_order: 2\nsplit: none\nrestart: false\ncompile: true"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 97,
      "type": "Note",
      "pos": [
        924.5000481736068,
        1029.1704255812397
      ],
      "size": [
        210,
        250.57876947962808
      ],
      "flags": {},
      "order": 3,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "balanced speed",
      "properties": {},
      "widgets_values": [
        "(9.50 t/s on 3090, 8.4 GB vram)\n\n7b-no-llm-bf16\nbf16\nexllama: 7b-exl-4bit\nsdpa\nfree_mem: false\n5 steps\ncfg: 1.40\nsampling: false\nstreaming_to_audio: true\nbuffer: 3 sec\nnegative_steps_to_skip: 0.1\nsemantic_steps_to_skip: 1.0\nincrease_cfg: false\nsolver_order: 2\nsplit: newline\nrestart: true\ncompile: true"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 96,
      "type": "Note",
      "pos": [
        922.8081617964813,
        735.4651270256992
      ],
      "size": [
        213.28901001245708,
        253.85055735706106
      ],
      "flags": {},
      "order": 4,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "title": "fast speed, low quality",
      "properties": {},
      "widgets_values": [
        "(12.20 t/s on 3090, but quality may suffer, 8.4 GB vram)\n\n7b-no-llm-bf16\nbf16\nexllama: 7b-exl-4bit\nsdpa\nfree_mem: false\n3 steps\ncfg: 1.55\nsampling: false\nstreaming_to_audio: true\nbuffer: 1 sec\nnegative_steps_to_skip: 0.5\nsemantic_steps_to_skip: 1.0\nincrease_cfg: false\nsolver_order: 1\nsplit: sentence\nrestart: true\ncompile: true"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 80,
      "type": "LoadAudio",
      "pos": [
        254.40213864498602,
        1009.8499273539916
      ],
      "size": [
        214.080078125,
        136
      ],
      "flags": {},
      "order": 5,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "AUDIO",
          "type": "AUDIO",
          "links": [
            48,
            50
          ]
        }
      ],
      "title": "LoadAudio",
      "properties": {
        "Node name for S&R": "LoadAudio"
      },
      "widgets_values": [
        "emma_ru_xtts_3.wav",
        null,
        null
      ]
    },
    {
      "id": 81,
      "type": "LoadAudio",
      "pos": [
        253.26737899486136,
        826.7887060985332
      ],
      "size": [
        214.080078125,
        136
      ],
      "flags": {},
      "order": 6,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "AUDIO",
          "type": "AUDIO",
          "links": [
            51
          ]
        }
      ],
      "title": "LoadAudio",
      "properties": {
        "Node name for S&R": "LoadAudio"
      },
      "widgets_values": [
        "emma_ru_xtts_2_.wav",
        null,
        null
      ]
    },
    {
      "id": 93,
      "type": "VibeVoiceMultipleSpeakersNodeExl3",
      "pos": [
        567.0719208760809,
        542.8382427526174
      ],
      "size": [
        343.0784693134585,
        750.3680387724191
      ],
      "flags": {},
      "order": 11,
      "mode": 0,
      "inputs": [
        {
          "name": "speaker1_voice",
          "shape": 7,
          "type": "AUDIO",
          "link": 50
        },
        {
          "name": "speaker2_voice",
          "shape": 7,
          "type": "AUDIO",
          "link": 51
        },
        {
          "name": "speaker3_voice",
          "shape": 7,
          "type": "AUDIO",
          "link": null
        },
        {
          "name": "speaker4_voice",
          "shape": 7,
          "type": "AUDIO",
          "link": null
        },
        {
          "name": "speaker5_voice",
          "shape": 7,
          "type": "AUDIO",
          "link": null
        },
        {
          "name": "speaker6_voice",
          "shape": 7,
          "type": "AUDIO",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "audio",
          "type": "AUDIO",
          "links": [
            46
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "VibeVoiceMultipleSpeakersNodeExl3"
      },
      "widgets_values": [
        "[1]: Приветик всем котяткам в этом чатике! Ха-ха!\n[2]: Блин, ты кого, это котяткой назвала? Совсем что ли с дуба рухнула?\n[1]: Просите, Владимир Вольфович, я вас сразу так и не узнала...\",\n[2]: Я - это классика, это знать надо! Дайте мне вести \"Спокойной ночи, малыши\". ВСЕ заснут в девять часов - и дети, и взрослые!\"",
        "VibeVoice-7B-no-llm-bf16",
        "bf16",
        "vibevoice-7b-exl3-4bit",
        "sdpa",
        true,
        5,
        5,
        "increment",
        1.4,
        false,
        0.95,
        0.95,
        true,
        3,
        0.1,
        1,
        false,
        "2",
        "newline",
        true,
        true
      ]
    },
    {
      "id": 99,
      "type": "Note",
      "pos": [
        460.9277307559414,
        274.20442998759154
      ],
      "size": [
        526.1860268686264,
        172.21048385576057
      ],
      "flags": {},
      "order": 7,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {},
      "widgets_values": [
        "Nodes: https://github.com/Mozer/ComfyUI-VibeVoice-exl3\n\nModels are auto-dowloaded from: https://huggingface.co/collections/tensorbanana/vibevoice\n\nas a temporary solution you can manually download models to a folder using this folder structure:\n\nComfyUI/models/vibevoice/models--tensorbanana--vibevoice-7b-exl3-4bit/snapshots/badfbb16dd63a1a8e633ba6eb138a21303ed1325/model.safetensors\nor\nComfyUI/models/vibevoice/models--tensorbanana--vibevoice-7b-no-llm-bf16/snapshots/0b68ee6da8ca6bca98484758d06cbe9c33f49e7b/model.safetensors\n\nwhere badfbb16dd63a1a8e633ba6eb138a21303ed1325 is any random hash"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 66,
      "type": "SaveAudioMP3",
      "pos": [
        972.8045343757384,
        1362.6649515135541
      ],
      "size": [
        258.9969884010857,
        136
      ],
      "flags": {},
      "order": 13,
      "mode": 0,
      "inputs": [
        {
          "name": "audio",
          "type": "AUDIO",
          "link": 45
        }
      ],
      "outputs": [],
      "properties": {
        "Node name for S&R": "SaveAudioMP3"
      },
      "widgets_values": [
        "audio/ComfyUI",
        "V0"
      ]
    },
    {
      "id": 92,
      "type": "VibeVoiceSingleSpeakerNodeExl3",
      "pos": [
        570.3212114993431,
        1363.6530925383702
      ],
      "size": [
        341.60868747844063,
        683.4159554399462
      ],
      "flags": {},
      "order": 10,
      "mode": 4,
      "inputs": [
        {
          "name": "voice_to_clone",
          "shape": 7,
          "type": "AUDIO",
          "link": 48
        }
      ],
      "outputs": [
        {
          "name": "audio",
          "type": "AUDIO",
          "links": [
            45,
            58
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "VibeVoiceSingleSpeakerNodeExl3"
      },
      "widgets_values": [
        "Валерьяна и Ягуар. Гротескная баллада о любви и энергетике. Валерьяна, или просто Валька, как её называли те, кто не боялся потерять язык, была не просто альтушкой — она была настоящей абстракцией.",
        "VibeVoice-7B-no-llm-bf16",
        "bf16",
        "vibevoice-7b-exl3-4bit",
        "sdpa",
        true,
        5,
        28,
        "increment",
        1.4,
        false,
        0.95,
        0.95,
        true,
        false,
        3,
        0.1,
        1,
        false,
        "2",
        "newline",
        true,
        true
      ]
    },
    {
      "id": 104,
      "type": "VHS_LoadVideo",
      "pos": [
        276.8104580944891,
        1510.8677469837387
      ],
      "size": [
        247.455078125,
        551.455078125
      ],
      "flags": {},
      "order": 12,
      "mode": 4,
      "inputs": [
        {
          "name": "meta_batch",
          "shape": 7,
          "type": "VHS_BatchManager",
          "link": null
        },
        {
          "name": "vae",
          "shape": 7,
          "type": "VAE",
          "link": null
        },
        {
          "name": "force_rate",
          "type": "FLOAT",
          "widget": {
            "name": "force_rate"
          },
          "link": 57
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            52
          ]
        },
        {
          "name": "frame_count",
          "type": "INT",
          "links": null
        },
        {
          "name": "audio",
          "type": "AUDIO",
          "links": null
        },
        {
          "name": "video_info",
          "type": "VHS_VIDEOINFO",
          "links": null
        }
      ],
      "properties": {
        "Node name for S&R": "VHS_LoadVideo"
      },
      "widgets_values": {
        "video": "emma_wm_300.mp4",
        "force_rate": 25,
        "custom_width": 0,
        "custom_height": 0,
        "frame_load_cap": 0,
        "skip_first_frames": 0,
        "select_every_nth": 1,
        "format": "AnimateDiff",
        "choose video to upload": "image",
        "videopreview": {
          "hidden": false,
          "paused": true,
          "params": {
            "filename": "emma_wm_300.mp4",
            "type": "input",
            "format": "video/mp4",
            "force_rate": 25,
            "custom_width": 0,
            "custom_height": 0,
            "frame_load_cap": 0,
            "skip_first_frames": 0,
            "select_every_nth": 1
          },
          "muted": false
        }
      }
    },
    {
      "id": 103,
      "type": "PrimitiveFloat",
      "pos": [
        24.405038255011643,
        1521.4388785954436
      ],
      "size": [
        210,
        58
      ],
      "flags": {},
      "order": 8,
      "mode": 4,
      "inputs": [],
      "outputs": [
        {
          "name": "FLOAT",
          "type": "FLOAT",
          "links": [
            53,
            56,
            57
          ]
        }
      ],
      "title": "FPS",
      "properties": {
        "Node name for S&R": "PrimitiveFloat"
      },
      "widgets_values": [
        25
      ]
    },
    {
      "id": 101,
      "type": "Wav2Lip",
      "pos": [
        1339.0476018790457,
        1354.47005978719
      ],
      "size": [
        234,
        175
      ],
      "flags": {},
      "order": 15,
      "mode": 4,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 52
        },
        {
          "name": "audio",
          "type": "AUDIO",
          "link": 58
        },
        {
          "name": "fps",
          "type": "FLOAT",
          "widget": {
            "name": "fps"
          },
          "link": 53
        }
      ],
      "outputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "links": [
            54
          ]
        },
        {
          "name": "audio",
          "type": "AUDIO",
          "links": [
            55
          ]
        }
      ],
      "properties": {
        "Node name for S&R": "Wav2Lip"
      },
      "widgets_values": [
        "repetitive",
        4,
        "wav2lip_gan.pth",
        10,
        25
      ]
    },
    {
      "id": 102,
      "type": "VHS_VideoCombine",
      "pos": [
        1354.688677364016,
        1579.236598248118
      ],
      "size": [
        214.7587890625,
        334
      ],
      "flags": {},
      "order": 16,
      "mode": 4,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 54
        },
        {
          "name": "audio",
          "shape": 7,
          "type": "AUDIO",
          "link": 55
        },
        {
          "name": "meta_batch",
          "shape": 7,
          "type": "VHS_BatchManager",
          "link": null
        },
        {
          "name": "vae",
          "shape": 7,
          "type": "VAE",
          "link": null
        },
        {
          "name": "frame_rate",
          "type": "FLOAT",
          "widget": {
            "name": "frame_rate"
          },
          "link": 56
        }
      ],
      "outputs": [
        {
          "name": "Filenames",
          "type": "VHS_FILENAMES",
          "links": null
        }
      ],
      "properties": {
        "Node name for S&R": "VHS_VideoCombine"
      },
      "widgets_values": {
        "frame_rate": 25,
        "loop_count": 0,
        "filename_prefix": "AnimateDiff",
        "format": "video/h264-mp4",
        "pix_fmt": "yuv420p",
        "crf": 19,
        "save_metadata": true,
        "trim_to_audio": false,
        "pingpong": false,
        "save_output": true,
        "videopreview": {
          "hidden": false,
          "paused": true,
          "params": {
            "filename": "AnimateDiff_00360-audio.mp4",
            "subfolder": "",
            "type": "output",
            "format": "video/h264-mp4",
            "frame_rate": 25,
            "workflow": "AnimateDiff_00360.png",
            "fullpath": "C:\\DATA\\SD\\ComfyUI_windows_portable_nvidia\\ComfyUI_windows_portable\\ComfyUI\\output\\AnimateDiff_00360-audio.mp4"
          },
          "muted": false
        }
      }
    }
  ],
  "links": [
    [
      45,
      92,
      0,
      66,
      0,
      "AUDIO"
    ],
    [
      46,
      93,
      0,
      94,
      0,
      "AUDIO"
    ],
    [
      48,
      80,
      0,
      92,
      0,
      "AUDIO"
    ],
    [
      49,
      76,
      0,
      100,
      0,
      "*"
    ],
    [
      50,
      80,
      0,
      93,
      0,
      "AUDIO"
    ],
    [
      51,
      81,
      0,
      93,
      1,
      "AUDIO"
    ],
    [
      52,
      104,
      0,
      101,
      0,
      "IMAGE"
    ],
    [
      53,
      103,
      0,
      101,
      2,
      "FLOAT"
    ],
    [
      54,
      101,
      0,
      102,
      0,
      "IMAGE"
    ],
    [
      55,
      101,
      1,
      102,
      1,
      "AUDIO"
    ],
    [
      56,
      103,
      0,
      102,
      4,
      "FLOAT"
    ],
    [
      57,
      103,
      0,
      104,
      2,
      "FLOAT"
    ],
    [
      58,
      92,
      0,
      101,
      1,
      "AUDIO"
    ]
  ],
  "groups": [],
  "config": {},
  "extra": {
    "ds": {
      "scale": 0.9229599817706885,
      "offset": [
        554.6347084821358,
        -258.0582647379479
      ]
    },
    "workflowRendererVersion": "LG",
    "frontendVersion": "1.33.10",
    "VHS_latentpreview": false,
    "VHS_latentpreviewrate": 3,
    "VHS_MetadataImage": true,
    "VHS_KeepIntermediate": true
  },
  "version": 0.4
}